## Qwen Added Memories
- План реализации для Bus Control: Спавнер пассажиров (NPC на остановках), логика посадки/высадки (выходят на своей остановке, заходят если есть место), визуализация (маленькие точки кучкуются на остановке и перемещаются в автобус), экономика (начисление денег за доставку)
- Важные проверки для системы пассажиров: 1) Производительность — удалять прибывших (ARRIVED) NPC, иначе утечка памяти через setTimeout с destroyEntity; 2) Логика целей — пассажиры садятся в любой автобус, выходят только на своей остановке (для MVP нормально); 3) Вместимость — при passengers === capacity новые не садятся, очередь растёт
- Система сохранения карт: MapSaveService (localStorage, автосохранение каждые 60 сек, пресеты, экспорт/импорт JSON), при загрузке карты очищать NPC (иначе "висят в воздухе")
- Переименование остановок: ПКМ по остановке → prompt с названием, визуальная подсказка (✏️ иконка, подсветка обводки, cursor: pointer)
